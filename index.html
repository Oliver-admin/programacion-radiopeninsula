<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Programación Radio Península</title>
<style>
  body {
    background: white;
    font-family: Arial, sans-serif;
    color: #333;
    margin: 20px;
  }

  h3 {
    text-align: center;
    font-weight: 700;
    font-size: 24px;
    margin-bottom: 20px;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
  }

  /* Bocina icono estilo */
  .icon-bocina {
    width: 30px;
    height: 30px;
    fill: #990000;
  }

  table {
    width: 100%;
    border-collapse: collapse;
    font-size: 14px;
  }

  th, td {
    border: 1px solid #ddd;
    padding: 8px 12px;
    text-align: left;
  }

  th {
    background-color: #e8f0fe;
    font-size: 13px;
  }

  tbody tr:nth-child(odd) {
    background-color: #f9f9f9;
  }

  tbody tr:nth-child(even) {
    background-color: #f1f5f9;
  }

  tbody tr:hover {
    background-color: #dceefb;
  }

  /* Enlaces tipo botón para los programas */
  a {
    color: #333333;
    text-decoration: none;
    transition: color 0.3s, background-color 0.3s;
    display: inline-block;
    padding: 4px 10px;
    border: 1px solid #ccc;
    border-radius: 5px;
    background-color: #f9f9f9;
    font-size: 12px;
    white-space: nowrap;
  }

  a:hover {
    color: #990000;
    background-color: #ffe6e6;
    border-color: #990000;
  }

  /* Hora columna estilo */
  tbody td:first-child {
    font-size: 12px;
    white-space: nowrap;
  }

  /* Animación para "EN VIVO AHORA" parpadeante */
  .en-vivo-ahora {
    color: #ff0000;
    font-weight: bold;
    animation: flash 1s infinite;
  }

  @keyframes flash {
    0%, 100% { opacity: 1; }
    50% { opacity: 0; }
  }
</style>
</head>
<body>

<h3>
  <svg class="icon-bocina" viewBox="0 0 24 24" aria-hidden="true" focusable="false">
    <path d="M3 9v6h4l5 5V4L7 9H3z"></path>
  </svg>
  Horario de Programación
</h3>

<table>
  <thead>
    <tr>
      <th>Hora</th>
      <th>Programa</th>
    </tr>
  </thead>
  <tbody id="programacion-body">
    <tr><td>8:00 AM a 9:30 AM</td><td><a href="#" target="_blank" rel="noopener noreferrer">Típicos Variados</a></td></tr>
    <tr><td>9:30 AM a 10:00 AM</td><td><a href="#" target="_blank" rel="noopener noreferrer">Típicos (Vladimir Atencio)</a></td></tr>
    <tr><td>10:00 AM a 10:30 AM</td><td><a href="#" target="_blank" rel="noopener noreferrer">Típicos (Nenito Vargas)</a></td></tr>
    <tr><td>10:30 AM a 11:00 AM</td><td><a href="#" target="_blank" rel="noopener noreferrer">Café 93.9</a></td></tr>
    <tr><td>11:00 AM a 11:30 AM</td><td><a href="#" target="_blank" rel="noopener noreferrer">Típicos Variados</a></td></tr>
    <tr><td>11:30 AM a 11:45 AM</td><td><a href="#" target="_blank" rel="noopener noreferrer">Tres Patines</a></td></tr>
    <tr><td>11:45 AM a 12:00 PM</td><td><a href="#" target="_blank" rel="noopener noreferrer">Juan José Naturista</a></td></tr>
    <tr><td>12:00 PM a 1:30 PM</td><td><a href="#" target="_blank" rel="noopener noreferrer">Sangre Interiorana</a></td></tr>
    <tr><td>1:30 PM a 2:00 PM</td><td><a href="#" target="_blank" rel="noopener noreferrer">Típicos (Minguio Saez)</a></td></tr>
    <tr><td>2:00 PM a 2:30 PM</td><td><a href="#" target="_blank" rel="noopener noreferrer">Típicos (Edwin Martínez)</a></td></tr>
    <tr><td>2:30 PM a 3:00 PM</td><td><a href="#" target="_blank" rel="noopener noreferrer">Típicos (Dorindo Cardenas)</a></td></tr>
    <tr><td>3:00 PM a 4:00 PM</td><td><a href="#" target="_blank" rel="noopener noreferrer">Típicos Variados</a></td></tr>
    <tr><td>4:00 PM a 5:00 PM</td><td><a href="#" target="_blank" rel="noopener noreferrer">Cantares De Mi Campiña</a></td></tr>
    <tr><td>5:00 PM a 6:00 PM</td><td><a href="#" target="_blank" rel="noopener noreferrer">Sangre Interiorana</a></td></tr>
    <tr><td>6:00 PM a 7:00 PM</td><td><a href="#" target="_blank" rel="noopener noreferrer">Típicos Variados</a></td></tr>
    <tr><td>7:00 PM a 7:30 PM</td><td><a href="#" target="_blank" rel="noopener noreferrer">Así Canta La Montaña</a></td></tr>
    <tr><td>7:30 PM a 8:30 PM</td><td><a href="#" target="_blank" rel="noopener noreferrer">Típicos Variados</a></td></tr>
    <tr><td>8:30 PM a 9:30 PM</td><td><a href="#" target="_blank" rel="noopener noreferrer">Las Voces De Nuestro Folklor</a></td></tr>
    <tr><td>9:30 PM a 8:00 AM</td><td><a href="#" target="_blank" rel="noopener noreferrer">Enlace KwContinente</a></td></tr>
  </tbody>
</table>

<script>
  function horaActualEnMinutos() {
    const ahora = new Date();
    return ahora.getHours() * 60 + ahora.getMinutes();
  }

  function parseHora(horaStr) {
    // Formato: "8:00 AM", "12:00 PM", etc.
    const [time, meridiano] = horaStr.trim().split(' ');
    let [hora, min] = time.split(':').map(Number);

    if (meridiano === 'PM' && hora !== 12) {
      hora += 12;
    }
    if (meridiano === 'AM' && hora === 12) {
      hora = 0;
    }
    return hora * 60 + min;
  }

  function estaEnVivo(inicio, fin) {
    // Si fin < inicio, significa que cruza medianoche
    if (fin < inicio) {
      return (horaActualEnMinutos() >= inicio) || (horaActualEnMinutos() < fin);
    } else {
      return (horaActualEnMinutos() >= inicio) && (horaActualEnMinutos() < fin);
    }
  }

  function actualizarEnVivo() {
    const filas = document.querySelectorAll('#programacion-body tr');

    filas.forEach(fila => {
      // Limpiar "EN VIVO AHORA" previo
      fila.querySelectorAll('.en-vivo-ahora').forEach(e => e.remove());

      const horaTexto = fila.cells[0].textContent;
      // Separar inicio y fin
      const [inicioStr, , finStr] = horaTexto.split(' '); // ["8:00", "AM", "a", "9:30", "AM"] - cuidado con formato

      // Mejor dividir en dos partes con " a "
      const partes = horaTexto.split(' a ');
      if (partes.length !== 2) return;

      const inicio = parseHora(partes[0]);
      const fin = parseHora(partes[1]);

      if (estaEnVivo(inicio, fin)) {
        // Crear span EN VIVO AHORA
        const span = document.createElement('span');
        span.className = 'en-vivo-ahora';
        span.textContent = ' EN VIVO AHORA';
        fila.cells[0].appendChild(span);
      }
    });
  }

  actualizarEnVivo();
  // Actualizar cada minuto
  setInterval(actualizarEnVivo, 60000);
</script>

</body>
</html>
